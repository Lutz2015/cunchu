define(function(require,exports,module){function a(a){var b=new $.Deferred,c=a.data;return i.get({url:a.url,data:c,success:function(a){b.resolve(a.result)}}),b}function b(){return a({url:k.getcarelist})}function c(){var a=require("widget/dialog/js/dialog");require("template/newCare"),j.render("template/newCare",{},function(b,c){a.init({dom:".j-care-newcreate",title:"添加保养项目",confirm:"确认添加",content:c,callback:function(){var a=$(".j-newcare-caname").val();if(a){var b=$(".j-newcare-capart").val();i.post({url:k.addcare,data:{caname:a,capart:b},success:function(a){0==a.error&&($(".j-dialog").remove(),e())}})}else $(".j-newcare-check").removeClass("hide")}}),$(".j-newcare-caname").focus(),d()})}function d(){$(".j-newcare-caname").on("keydown",function(a){$(".j-newcare-check").addClass("hide")})}function e(){var a=b();a.then(function(a){j.render("template/care",{result:a},function(a,b){l.html(b)})}).then(function(){$(".j-care-create").on("click",function(){c()})})}function f(){var a=require("widget/head/js/head");a.init({title:"百度爱车后台内部管理平台",dom:"#head"})}function g(){var a=require("widget/aside/js/aside");a.init({dom:"#aside",showDom:"asidecare"})}function h(){f(),g(),e(),i.toggleContent("#care")}require("template/care");var i=window.sharp,j=window.dust,k=window.sharpApi,l=$("#care");module.exports={init:h}});