define(function(require,exports,module){function a(){var a=$(".j-brand-btn"),b=$(".j-choose-brand-down"),c=$(".j-series-btn"),d=$(".j-choose-series-down");a.on("click",function(e){e.stopPropagation(),b.removeClass("hide"),d.addClass("hide"),$(this).css("border-color","#4497ff"),a.val()&&c.css("border-color","#e0e0e0")}),c.on("click",function(e){e.stopPropagation(),d.removeClass("hide"),b.addClass("hide"),a.val()?$(this).css("border-color","#4497ff"):(a.css("border-color","#e0e0e0"),c.css("border-color","#e0e0e0"))}),$(document).on("click",function(e){e.stopPropagation(),a.css("border-color","#e0e0e0"),c.css("border-color","#e0e0e0"),b.addClass("hide"),d.addClass("hide")})}function b(a){var b=new $.Deferred,c=a.data;return l.get({url:a.url,data:c,success:function(a){b.resolve(a.result)}}),b}function c(){return b({url:m.getbrandlist})}function d(a){return b({url:m.getserieslist,data:{bid:a}})}function e(){var a=c();a.then(function(a){for(var b={A:"0",B:"0",C:"0",D:"0",E:"0",F:"1",G:"1",H:"1",I:"1",J:"1",K:"2",L:"2",M:"2",N:"2",O:"2",P:"3",Q:"3",R:"3",S:"3",T:"3",V:"4",W:"4",X:"4",Y:"4",Z:"4"},c=[[],[],[],[],[]],d=0;d<a.length;d++){var e=a[d];Array.prototype.push.apply(c[b[e.key]],a[d].cars)}a.length>0&&(require("widget/choose/html/brand"),k.render("widget/choose/html/brand",{result:c},function(a,b){$(".j-choose-brand-down").html(b),g()}))})}function f(a){var b=d(a);b.then(function(a){require("widget/choose/html/carseries"),k.render("widget/choose/html/carseries",{result:a},function(a,b){$(".j-choose-series-down").html(b),h()})})}function g(){$(".c-tab-item").on("click",function(a){a.stopPropagation(),$(this).addClass("hotbrand-select").siblings().removeClass("hotbrand-select"),$(".j-tab-carbrand").hide().eq($(this).index()).show()}),$(".j-tab-carbrand").on("click",function(a){a.stopPropagation(),$(".j-brand-btn").val(a.target.dataset.bname).attr("data-bid",a.target.dataset.bid).css("border-color","#e0e0e0"),f(a.target.dataset.bid),$(".j-series-btn").val("").removeClass("addcar-color"),$(".j-choose-brand-down").addClass("hide")})}function h(){$(".c-tab-item").on("click",function(a){a.stopPropagation(),$(this).addClass("series-select").siblings().removeClass("series-select"),$(".j-tab-carseries").hide().eq($(this).index()).show()}),$(".j-tab-carseries").on("click",function(a){a.stopPropagation(),$(".j-choose-brand-down").addClass("hide"),$(".j-series-btn").val(a.target.dataset.sname).attr("data-sid",a.target.dataset.sid).css("border-color","#e0e0e0"),$(".j-choose-series-down").addClass("hide")})}function i(b){k.render("widget/choose/html/choose",{title:b.title},function(c,d){$(b.dom).html(d),a(),e()})}function j(a){i(a)}require("widget/choose/html/choose");var k=window.dust,l=window.sharp,m=window.sharpApi;module.exports={init:j}});