define(function(require,exports,module){function a(a,b){this.$el=a,this.index=0,this.start=0,this.move=0,this.current=0,this.auto=null,this.distance=100,this.$ul=this.$el.children("ul"),this.$li=this.$el.find("li"),this.$width=this.$li.width(),this.$length=this.$li.length,this.orientation="onorientationchange"in window?"orientationchange":"resize",this.defaults={autoplay:!0,timeout:5e3,speed:.6,indicator:!0},this.options=$.extend({},this.defaults,b),this.initialize.apply(this,arguments)}function b(){$.extend($.fn,{slider:function(b){return new a(this,b)}})}a.prototype={constructor:a,initialize:function(){this._create(),this._bindEvent()},_create:function(){var a=this;a.$ul.prepend(a.$li.last().clone()).append(a.$li.first().clone()),a._resize(),a._autoPlay(),a._createIndicator(),a._dot(a.index)},_resize:function(){var a=this;a._translate(a.$ul.children().first(),-1*a.$width),a._translate(a.$ul.children().last(),a.$width*a.$length),a.$li.each(function(b){a._translate($(this),a.$width*b)})},_bindEvent:function(){var a=this;a.$el.on("touchstart",function(b){a._touches(b),a._touchstart(b)}),a.$el.on("touchmove",function(b){a._touches(b),a._touchmove(b)}),a.$el.on("touchend",function(){a._touchend()}),$(window).on(a.orientation,function(){a.$width=$(window).width(),a._resize(),a._scroll(0)})},_createIndicator:function(){if(this.options.indicator){$("<div/>",{"class":"indicator"}).appendTo(this.$el);for(var a=0;a<this.$length;a++)$("<span/>").appendTo($(".indicator"))}},_dot:function(a){this.options.indicator&&$(".indicator").children().eq(a).addClass("cur").siblings().removeClass("cur")},_transition:function(a,b){a.css({"-webkit-transition":"all "+b+"s",transition:"all "+b+"s"})},_translate:function(a,b){a.css({"-webkit-transform":"translate3d("+b+"px,0,0)",transform:"translate3d("+b+"px,0,0)"})},_moveLeft:function(){this.index++,this._move()},_moveRight:function(){this.index--,this._move()},_scroll:function(a){this._transition(this.$ul,a),this._translate(this.$ul,-this.index*this.$width)},_move:function(){var a=this;a.index>=a.$length?(a._scroll(a.options.speed),a.index=0,setTimeout(function(){a._scroll(0)},600)):a.index<0?(a._scroll(a.options.speed),a.index=a.$length-1,setTimeout(function(){a._scroll(0)},600)):a._scroll(a.options.speed),a._dot(a.index)},_autoPlay:function(){var a=this;this.options.autoplay&&(a.auto=setInterval(function(){a._moveLeft()},a.options.timeout))},_touches:function(a){a.touches||(a.touches=a.originalEvent.touches)},_touchstart:function(a){this.start=a.touches[0].pageX},_touchmove:function(a){a.preventDefault(),this.options.autoplay&&clearInterval(this.auto),this.current=a.touches[0].pageX,this.move=this.current-this.start,this._transition(this.$ul,0),this._translate(this.$ul,-(this.$width*parseInt(this.index)-this.move))},_touchend:function(){var a=this;clearInterval(a.auto),Math.abs(this.move)<=this.distance?(this._scroll(a.options.speed),this._autoPlay()):this.move>this.distance?(this._moveRight(),this._autoPlay()):this.move<-this.distance&&(this._moveLeft(),this._autoPlay()),this.move=0}},module.exports={init:b}});