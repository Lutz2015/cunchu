define(function(require,exports,module){function a(){var a=new $.Deferred;return h.get({url:g.getShopList,success:function(b){a.resolve(b.result)}}),a}function b(){var b=a();b.then(function(a){return 0==a.length?!1:void f.render("template/shop",{result:a},function(a,b){i.html(b),c()})})}function c(){$(".j-shop-box").on("click",function(a){a.preventDefault();var b=$(this),c={sp_no:b.data("sp_no"),sp_address:b.data("sp_address"),sp_name:b.data("sp_name"),business_time:b.data("business_time"),hotline:b.data("hotline"),coordinate_y:b.data("coordinate_y"),coordinate_x:b.data("coordinate_x")},d=h.getLocalData("otherInfo");d.currentShop=c,h.setLocalData("otherInfo",d),location.href="#services/"})}function d(){if(h.isBox)return document.title="选择门店",!1;var a=require("widget/head/js/head");a.init({hasBack:1,hasHref:"http://www.baidu.com",title:"选择门店",dom:"#shophead",loginout:0})}function e(){d(),b(),h.toggleContent("#shop")}require("template/shop");var f=window.dust,g=window.sharpApi,h=window.sharp,i=(h.map,$("#shopcontent"));module.exports={init:e}});